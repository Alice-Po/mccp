---
import Layout from "../layouts/Layout.astro";
import Image from "../components/Image.astro";
import { getCollection } from 'astro:content';
import "../styles/global.css";

// R√©cup√©rer les articles de blog
const allPosts = await getCollection('blog', ({ data }) => !data.draft);

// Trier par date et prendre les 3 plus r√©cents
const recentPosts = allPosts
  .sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf())
  .slice(0, 3);

// Fonction pour g√©n√©rer un slug √† partir du titre
function generateSlug(title: string) {
  return title
    .toLowerCase()
    .replace(/[^\w\s]/g, '')
    .replace(/\s+/g, '-');
}
---

<Layout title="MCCP">
  <main>
    <section class="hero-section">
      <div class="hero-content">
        <h1>
          UNE LISTE CITOYENNE POUR LES √âLECTIONS MUNICIPALES 2026
        </h1>
        <p>
          Port√© par le Mouvement Citoyen des Communes de Putanges-le-Lac
        </p>
      </div>
      <div class="photo-credit">
        Photo du lac de Rabodanges ¬© Aur√©
      </div>
    </section>

    <div class="content-wrapper">
      <!-- Section Ambitions -->
      <section class="ambitions-section">
        <h2>Nos ambitions</h2>
        <ul>
          <li>
            Des <strong>bourgs vivants</strong> o√π l'esprit de village est conserv√©
          </li>
          <li>
            Une v√©ritable <strong>solidarit√©</strong> entre nos diff√©rentes communes et entre <strong>g√©n√©rations</strong>
          </li>
          <li>
            Des <strong>commerces locaux</strong> et <strong>services essentiels</strong> accessibles √† tous les habitants
          </li>
          <li>
            Une <strong>√©conomie locale</strong> dynamique cr√©ant des emplois durables
          </li>
          <li>
            Un environnement pr√©serv√© et valoris√© pour notre sant√© et les <strong>g√©n√©rations futures</strong>
          </li>
        </ul>
      </section>

      <!-- Section texte -->
      <section class="text-section">
        <p>
          Nous pensons qu'un programme politique doit √™tre d√©fini en concertation avec l'ensemble des habitants qui souhaitent exprimer leur avis, leurs envies et leurs besoins, en embrassant toute la diversit√© de la population de Putanges-le-Lac.
        </p>
        <p>
          Le programme, c'est donc tous ensemble que nous le travaillerons, par divers moyens : des d√©bats publics, du porte √† porte, ou autour d'un verre.
        </p>
      </section>

      <!-- Section Valeurs -->
      <section class="values-section">
        <h2>Nos valeurs</h2>
        <ul>
          <li>
            <strong>D√©mocratie participative</strong>, les d√©cisions importantes sont prises avec les habitants
          </li>
          <li>
            <strong>√âquit√©</strong>, entre toutes les communes
          </li>
          <li>
            <strong>Solidarit√©</strong>, entre g√©n√©rations et entre tous les habitants
          </li>
          <li>
            <strong>Transparence et √©thique</strong>, dans la gestion des affaires publiques
          </li>
          <li>
            <strong>Respect</strong>, des paysages et de l'environnement. Pr√©servation des ressources naturelles de notre territoire
          </li>
          <li>
            <strong>Inclusion</strong>, de toutes et tous, quelles que soient les diff√©rences
          </li>
        </ul>
      </section>

      <!-- Nouvelle section Actualit√©s -->
      <section class="news-section">
        <h2>Derni√®res actualit√©s</h2>
        
        <div class="news-grid">
          {recentPosts.map(post => {
            const slug = post.slug || generateSlug(post.data.title);
            
            return (
              <article class="news-card">
                <a href={`/blog/${slug}`} class="card-link">
                  {post.data.image && (
                    <img src={post.data.image} alt={post.data.title} />
                  )}
                  <div class="news-content">
                    <h3>{post.data.title}</h3>
                    <div class="post-meta">
                      <time datetime={post.data.pubDate.toISOString()}>
                        {post.data.pubDate.toLocaleDateString('fr-FR')}
                      </time>
                    </div>
                    <p class="description">{post.data.description}</p>
                    <span class="read-more">
                      Lire la suite ‚Üí
                    </span>
                  </div>
                </a>
              </article>
            );
          })}
        </div>
        
        <div class="view-all">
          <a href="/blog" class="view-all-link">Voir toutes les actualit√©s</a>
        </div>
      </section>

      <!-- Section Contribution -->
      <section class="contribution-section">
        <h2>Envie de contribuer ?</h2>
        <div class="max-w-3xl mx-auto">
          <p class="text-secondary">Vous d√©cidez de votre niveau d'engagement</p>
          
          <ul class="space-y-6">
            <li>
              <h3 class="text-lg font-bold text-secondary">Restez inform√© !</h3>
              <p>Laisser-nous vos coordonn√©es, t√©l√©phone ou email. C'est d√©j√† nous soutenir et montrer votre int√©r√™t.</p>
              <iframe id="infolettre" data-w-type="embedded" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://sq3k4.mjt.lu/wgt/sq3k4/xyg5/form?c=4d1df53c" width="100%" style="height: 0;"></iframe>

<script type="text/javascript" src="https://app.mailjet.com/pas-nc-embedded-v1.js"></script>



            </li>
            <li class="pb-4">
              <h3 class="text-lg font-bold text-secondary mt-4">Suivez-nous sur les r√©seaux sociaux</h3>
              <p>Restez inform√©s de nos actualit√©s et √©v√©nements</p>
              <div class="social-buttons">
                <a href="https://www.facebook.com/mccputanges" class="facebook-button" target="_blank" rel="noopener noreferrer">
                  <span>üì±</span> Facebook
                </a>
                <a href="https://www.instagram.com/mccputanges" class="instagram-button" target="_blank" rel="noopener noreferrer">
                  <span>üì∑</span> Instagram
                </a>
              </div>
            </li>
            <li>
              <h3 class="text-lg font-bold text-secondary mt-4">Parlez en autour de vous !</h3>
              <p>Nous cherchons toujours des √©nergies vives.</p>
            </li>
            
            <li>
              <h3 class="text-lg font-bold text-secondary">Partagez vos id√©es</h3>
              <ul class="ml-6 space-y-2 list-disc">
                <li>Par mail : Envoyez-nous vos suggestions par mail. Un conseil, une id√©e, une pr√©occupation ? Nous vous √©coutons.</li>
                <li>Par t√©l√©phone : Accordez-nous un temps d'√©change par t√©l√©phone ou en personne.</li>
              </ul>
            </li>
            
            <li>
              <h3 class="text-lg font-bold text-secondary">Rencontrons-nous !</h3>
              <p>Participez √† nos rencontres, des moments conviviaux pour apprendre et √©changer.</p>
            </li>
            
            <li>
              <h3 class="text-lg font-bold text-secondary">Rejoignez-nous !</h3>
              <p>Participez aux r√©unions de travail de pr√©paration de la liste deux soir√©es par mois.</p>
            </li>
          </ul>
        </div>
  </section>

      <!-- Section Contact -->
      <section class="contact-section">
        <h2>Contactez-nous</h2>
        <p>Vous pouvez nous contacter par t√©l√©phone ou par email.<p>
          <a href="tel:0767020716" class="phone-button">
            <span>üìû</span>
            07 67 02 07 16
          </a>
        
        <form 
          action="https://formspree.io/f/xjkyqpag"
          method="POST"
          class="contact-form"
        >
          <div class="form-group">
            <label for="email">Votre email</label>
            <input 
              type="email" 
              id="email"
              name="email" 
              required
              placeholder="exemple@email.com"
            />
          </div>

          <div class="form-group">
            <label for="message">Votre message</label>
            <textarea 
              id="message"
              name="message" 
              required
              placeholder="Partagez-nous vos id√©es, questions ou suggestions..."
              rows="5"
            ></textarea>
          </div>

          <button type="submit">
            Envoyer
          </button>
        </form>
      </section>

      <!-- Nouvelle section Kit de communication -->
      <section class="kit-section">
        <h2>Kit de communication</h2>
        <p>T√©l√©chargez et partagez nos documents d'information pour faire conna√Ætre notre initiative.</p>
        
        <div class="documents-grid">
          <div class="document-card">
            <div class="document-icon">üìÑ</div>
            <div class="document-info">
              <h3>Livret d'accueil</h3>
              <p>Livret d'accueil de la d√©marche et de nos valeurs</p>
              <a href="/assets/img/MCCP-Livret-daccueil.pdf" download class="download-button">
                <span>‚¨áÔ∏è</span> T√©l√©charger le PDF
              </a>
            </div>
          </div>
          
          <div class="document-card">
            <div class="document-icon">üìÑ</div>
            <div class="document-info">
              <h3>Tract √† imprimer</h3>
              <p>Carte de visite √† distribuer pour informer sur notre initiative citoyenne</p>
              <a href="/assets/img/tract-a-imprimer.pdf" download class="download-button">
                <span>‚¨áÔ∏è</span> T√©l√©charger le PDF
              </a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
</Layout>

<style>
.contribution-section li {
  margin-top: 1rem;
}
</style>
 
 